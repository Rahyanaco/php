# Rahyana API - ูููููโูุง PHP

ุงู ูพูุดู ุดุงูู ูููููโูุง PHP ุจุฑุง ุงุณุชูุงุฏู ุงุฒ Rahyana AI API ุงุณุช. ุงู ูููููโูุง ูุญูู ุงุฏุบุงู ูุงุจูุชโูุง ููุด ูุตููุน Rahyana ุฑุง ุฏุฑ ุจุฑูุงููโูุง PHPุ ุงุฒ ุฌููู ุงูุฒูููโูุง ูุฑุฏูพุฑุณ ูุดุงู ูโุฏูุฏ.

## ๐ ุณุงุฎุชุงุฑ ูพูุดู

```
php/
โโโ chat-completions/
โ   โโโ image-generation.php      # ููููู ุชููุฏ ุชุตูุฑ
โ   โโโ WORDPRESS_INTEGRATION.md   # ุฑุงูููุง ุงุฏุบุงู ูุฑุฏูพุฑุณ
โโโ completions/
โโโ models/
```

## ๐ ุดุฑูุน ุณุฑุน

### ูพุดโูุงุฒูุง

- PHP 7.4 ุง ุจุงูุงุชุฑ
- ุงูุฒููู cURL ูุนุงู
- ฺฉูุฏ API Rahyana (ุงุฒ [rahyana.ir](https://rahyana.ir) ุฏุฑุงูุช ฺฉูุฏ)

### ุงุณุชูุงุฏู ูพุงู

1. **ฺฉูุฏ API ุฎูุฏ ุฑุง ุชูุธู ฺฉูุฏ** (ุงุฒ ุทุฑู ูุชุบุฑ ูุญุท ุง ูุฑุงุด ุงุณฺฉุฑูพุช):
   ```bash
   export API_KEY_OVERRIDE="your_api_key_here"
   ```

2. **ููููู ุชููุฏ ุชุตูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ**:
   ```bash
   php chat-completions/image-generation.php
   ```

3. **ุชุตุงูุฑ ุชููุฏ ุดุฏู** ุฏุฑ ูพูุดู `chat-completions/generated-images/` ุฐุฎุฑู ูโุดููุฏ

## ๐ ูููููโูุง

### ุชููุฏ ุชุตูุฑ

**ูุงู**: `chat-completions/image-generation.php`

ุชููุฏ ุชุตูุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ Rahyana API. ุงู ููููู:
- ุจู Rahyana API ูุชุตู ูโุดูุฏ
- ุจุฑ ุงุณุงุณ ฺฉ ูุชูุ ุชุตูุฑ ุชููุฏ ูโฺฉูุฏ
- ุชุตูุฑ ุชููุฏ ุดุฏู ุฑุง ุฏุฑ ฺฉ ูพูุดู ูุญู ุฐุฎุฑู ูโฺฉูุฏ

**ุงุณุชูุงุฏู**:
```bash
# ุงุณุชูุงุฏู ุงุฒ ูุชุบุฑ ูุญุท ุจุฑุง ฺฉูุฏ API
export API_KEY_OVERRIDE="your_api_key_here"
php chat-completions/image-generation.php

# ุง ุชูุธู ูพูุดู ุฎุฑูุฌ
export OUTPUT_DIR="/path/to/output"
php chat-completions/image-generation.php
```

**ูพฺฉุฑุจูุฏ**:
- `API_KEY_OVERRIDE`: ฺฉูุฏ API ุดูุง (ูุชุบุฑ ูุญุท)
- `OUTPUT_DIR`: ูพูุดู ุฐุฎุฑู ุชุตุงูุฑ (ูพุดโูุฑุถ: `./generated-images`)
- ูุฏู: `google/gemini-3-pro-image-preview` (ูุงุจู ุชูุธู ุฏุฑ ุงุณฺฉุฑูพุช)
- ูุชู: `"a dog in a city"` (ูุงุจู ุชูุธู ุฏุฑ ุงุณฺฉุฑูพุช)

## ๐ ุงุฏุบุงู ูุฑุฏูพุฑุณ

**ูุงูโูุง**: 
- `chat-completions/WORDPRESS_INTEGRATION.md` (ุงูฺฏูุณ)
- `chat-completions/WORDPRESS_INTEGRATION.fa.md` (ูุงุฑุณ)

ุฑุงูููุง ฺฉุงูู ุจุฑุง ุงุฏุบุงู ุชููุฏ ุชุตูุฑ Rahyana ุฏุฑ ูุฑุฏูพุฑุณ:

- โ ุงุฌุงุฏ ุงูุฒููู ูุณุชูู
- โ ูพุงุฏูโุณุงุฒ ุดูุฑุชฺฉุฏ
- โ ุชูุณุนู ุจูุงฺฉ ฺฏูุชูุจุฑฺฏ
- โ ุจูุชุฑู ุฑูุดโูุง ุงููุช
- โ ูุฏุฑุช ุฎุทุง
- โ ุงุณุชุฑุงุชฺโูุง ฺฉุด

### ุงุฏุบุงู ุณุฑุน ูุฑุฏูพุฑุณ

1. **ฺฉ ูพูุดู ุงูุฒููู ุงุฌุงุฏ ฺฉูุฏ** ุฏุฑ `wp-content/plugins/`
2. **ฺฉุฏ ุงุฏุบุงู ุฑุง ฺฉูพ ฺฉูุฏ** ุงุฒ `WORDPRESS_INTEGRATION.md`
3. **ฺฉูุฏ API ุฎูุฏ ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ** ุฏุฑ ุชูุธูุงุช ูุฑุฏูพุฑุณ
4. **ุงุฒ ุดูุฑุชฺฉุฏ ุงุณุชูุงุฏู ฺฉูุฏ** ุฏุฑ ูพุณุชโูุง/ุตูุญุงุช:
   ```
   [rahyana_image prompt="a dog in a city" size="large"]
   ```

## ๐๏ธ ูฺฺฏโูุง

### ุงุณฺฉุฑูพุช ุชููุฏ ุชุตูุฑ

- โ ุงุฏุบุงู ฺฉุงูู API ุจุง Rahyana
- โ ูุฏุฑุช ฺูุฏู ูุฑูุช ูพุงุณุฎ
- โ ุงุณุชุฎุฑุงุฌ ู ุฑูุฒฺฏุดุง ุชุตูุฑ base64
- โ ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ูพูุดู
- โ ูุฏุฑุช ุฌุงูุน ุฎุทุง
- โ ุฑุงุจุท ุฎุท ูุฑูุงู

### ุงุฏุบุงู ูุฑุฏูพุฑุณ

- โ ุตูุญู ุชูุธูุงุช ุงุฏูู
- โ ูพุดุชุจุงู ุงุฒ ุดูุฑุชฺฉุฏ
- โ ุงุฏุบุงู ุจุง ฺฉุชุงุจุฎุงูู ุฑุณุงูู
- โ ุจูุชุฑู ุฑูุดโูุง ุงููุช
- โ ูพุดุชุจุงู ุงุฒ ฺฉุด
- โ ูุฏุฑุช ุฎุทุง

## ๐ ูุฑุฌุน API

### ุฏุฑุฎูุงุณุช ุชููุฏ ุชุตูุฑ

```php
$data = [
    'model' => 'google/gemini-3-pro-image-preview',
    'messages' => [
        [
            'role' => 'user',
            'content' => 'ูุชู ุดูุง ุงูุฌุง'
        ]
    ],
    'modalities' => ['image', 'text']
];
```

### ุณุงุฎุชุงุฑ ูพุงุณุฎ

API ุชุตุงูุฑ ุฑุง ุฏุฑ ูุฑูุชโูุง ูุฎุชูู ุจุฑูโฺฏุฑุฏุงูุฏ. ุงุณฺฉุฑูพุช ููุงุฑุฏ ุฒุฑ ุฑุง ูุฏุฑุช ูโฺฉูุฏ:
- `providerResponse.choices[0].message.images[0].image_url.url`
- `choices[0].message.content` (ุขุฑุงู ุง ุฑุดุชู)
- URLูุง ุฏุงุฏู ูุณุชูู

## ๐ ุงููุช

- **ูุฑฺฏุฒ ฺฉูุฏูุง API ุฑุง** ุฏุฑ ฺฉูุชุฑู ูุณุฎู commit ูฺฉูุฏ
- ุงุฒ ูุชุบุฑูุง ูุญุท ุจุฑุง ฺฉูุฏูุง API ุงุณุชูุงุฏู ฺฉูุฏ
- ุชูุงู ูุฑูุฏโูุง ฺฉุงุฑุจุฑ ุฑุง sanitize ฺฉูุฏ
- ูพุงุณุฎโูุง API ุฑุง ุงุนุชุจุงุฑุณูุฌ ฺฉูุฏ
- ุงุฒ nonceูุง ูุฑุฏูพุฑุณ ุจุฑุง ุฏุฑุฎูุงุณุชโูุง AJAX ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

1. **"ฺฉูุฏ API ูพฺฉุฑุจูุฏ ูุดุฏู"**
   - ูุชุบุฑ ูุญุท `API_KEY_OVERRIDE` ุฑุง ุชูุธู ฺฉูุฏ
   - ุง ุงุณฺฉุฑูพุช ุฑุง ุจุง ฺฉูุฏ API ุฎูุฏ ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ

2. **"ุงุฌุงุฏ ูพูุดู ูุงูููู ุจูุฏ"**
   - ูุฌูุฒูุง ูพูุดู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
   - ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู PHP ุฏุณุชุฑุณ ููุดุชู ุฏุงุฑุฏ

3. **"ูฺ ุชุตูุฑ ุฏุฑ ูพุงุณุฎ ุงูุช ูุดุฏ"**
   - ุณุงุฎุชุงุฑ ูพุงุณุฎ API ุฑุง ุจุฑุฑุณ ฺฉูุฏ
   - ุชุฃุฏ ฺฉูุฏ ฺฉู ูุฏู ุงุฒ ุชููุฏ ุชุตูุฑ ูพุดุชุจุงู ูโฺฉูุฏ
   - ูุฌูุฒูุง ฺฉูุฏ API ุฑุง ุจุฑุฑุณ ฺฉูุฏ

4. **ูุฑุฏูพุฑุณ: "ฺฉูุฏ API ูพฺฉุฑุจูุฏ ูุดุฏู"**
   - ุจู Settings > Rahyana Image Generator ุจุฑูุฏ
   - ฺฉูุฏ API ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ

## ๐ ูููููโูุง ฺฉุฏ

### ุชููุฏ ุชุตูุฑ ูพุงู

```php
<?php
require_once 'class-rahyana-image-generator.php';

$api_key = 'your_api_key_here';
$generator = new Rahyana_Image_Generator($api_key);

$result = $generator->generate_image('a dog in a city');

if (is_wp_error($result)) {
    echo 'ุฎุทุง: ' . $result->get_error_message();
} else {
    echo 'URL ุชุตูุฑ: ' . $result['image_url'];
}
```

### ุดูุฑุชฺฉุฏ ูุฑุฏูพุฑุณ

```php
[rahyana_image prompt="ุบุฑูุจ ุฒุจุง ุฎูุฑุดุฏ ุจุฑ ูุฑุงุฒ ฺฉููโูุง" size="large" class="my-custom-class"]
```

## ๐ ููุงุจุน ูุฑุชุจุท

- [ูุณุชูุฏุงุช Rahyana API](https://rahyana.ir/docs)
- [ุฑุงูููุง ุงูุฒููู ูุฑุฏูพุฑุณ](https://developer.wordpress.org/plugins/)
- [ูุณุชูุฏุงุช PHP cURL](https://www.php.net/manual/en/book.curl.php)

## ๐ ูุฌูุฒ

ุงู ูููููโูุง ุจูโุตูุฑุช "ููุงูโุทูุฑ ฺฉู ูุณุชูุฏ" ุจุฑุง ุงูุฏุงู ุขููุฒุด ู ุงุฏุบุงู ุงุฑุงุฆู ูโุดููุฏ.

## ๐ค ูุดุงุฑฺฉุช

ูุดุงุฑฺฉุชโูุง ุฎูุดโุขูุฏ ูุณุชูุฏ! ูุทูุงู:
1. ุงุฒ ุงุณุชุงูุฏุงุฑุฏูุง ฺฉุฏููุณ PHP (PSR-12) ูพุฑู ฺฉูุฏ
2. ูุฏุฑุช ุฎุทุง ุฑุง ุดุงูู ุดูุฏ
3. ุจุฑุง ููุทู ูพฺุฏู ูุธุฑ ุงุถุงูู ฺฉูุฏ
4. ุจุง ฺฉูุฏูุง API ูุงูุน (ุจุง ุงููุช) ุชุณุช ฺฉูุฏ

## ๐ง ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช ุง ุณูุงูุงุช:
- ุฑุงูููุง [ุงุฏุบุงู ูุฑุฏูพุฑุณ](chat-completions/WORDPRESS_INTEGRATION.md) ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุณุชูุฏุงุช API ุฑุง ุฏุฑ [rahyana.ir/docs](https://rahyana.ir/docs) ูุฑูุฑ ฺฉูุฏ
- ฺฉ issue ุฏุฑ GitHub ุจุงุฒ ฺฉูุฏ

